<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>The lost ones</title>
<style type="text/css">#home{display:block;width:200px;height:200px;background-color:red}body{font-family:arial;image-rendering:pixelated}.overlay{position:fixed;background-color:#000;width:100%;height:100%}#grass{position:absolute;background-color:#556b2f;width:100%;height:80%;bottom:0;display:block}#game{transform:translateY(300px) scale(2.5);perspective:2000px;width:500px;height:300px;border:1px solid green;overflow:hidden;background:#b0e0e6;margin:auto}.layer_far{position:relative;z-index:-100;transform:translateZ(-200px);display:none}.layer_middle{display:flex;align-items:flex-end;transform:translate3d(0,140px,-10px);perspective:700px;transform-style:preserve-3d;bottom:140px;height:350px;position:relative}#health-bar{width:200px;height:15px;border:1px solid #000;background:#fff;position:fixed;top:10px;left:50%;transform:translateX(-50%);z-index:1}#game-over{font-size:48px;position:absolute;top:25%;width:100%;text-align:center;background:#639}#scores:before{content:"Distance: "}#scores{color:#f5f5f5;position:fixed;top:10px;right:0;width:140px;z-index:1}.assetImg{display:none}.layer_street{border:5px solid dimgray;padding-top:5px;background-color:gray;position:absolute;bottom:0;height:75px;z-index:11}.layer_middle .building{margin-left:200px}.building{display:flex;position:relative}.side{backface-visibility:hidden;opacity:1%;box-sizing:border-box}.building .side.left{transform:rotateY(90deg) scaleZ(-1);transform-origin:0 0;position:absolute}.building .side.right{transform:rotateY(270deg) scaleZ(-1);transform-origin:100% 0;position:absolute;right:0}.building .side.top{background-color:gray!important;background-image:none;border:7px solid #a9a9a9;position:absolute;transform:rotateX(-90deg) scaleZ(-1);transform-origin:100% 0}.building .side.front,.building .side.top{z-index:1}#city{height:300px}div#game>canvas{display:block}</style></head>

<body>
  <div class="overlay"> </div>
  <div id="game">
    <div id="health-bar"></div>
    <div id="scores"></div>
    <div id="world">
      <div class="layer_far">
        <img id="city" src="/assets/city.png"></img>
      </div>
      <div id="grass"></div>
      <div id="layer_street" class="layer_street"> </div>
      <div id="layer_middle" class="layer_middle"> </div>
    </div>

    <div id="game-over" style="display:none">

    </div>
  </div>
<script type="text/javascript">!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e,n){return t<e?e:t>n?n:t}function a(t,e){try{if(e){var n=new RegExp(".{1,"+e+"}","g");return t.match(n).map(function(t){return parseInt(t,16)})}return parseInt(t,16)}catch(t){console.log(t)}}function s(t){return document.getElementById(t)}function A(t){return document.createElement(t)}function c(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return n.forEach(function(e){return t.append(e)}),n[0]}function u(t,e,n,i){var r=n-t,o=i-e;return Math.sqrt(r*r+o*o)}function h(t){return Math.ceil(Math.random()*t)}function l(){return[h(255),h(255),h(255)]}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return[].concat(r(l())).map(function(n){return p(o(n,t,e),2)}).join("")}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return("0".repeat(e)+t.toString(16)).slice(-e)}function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document.body,i=A("canvas"),r=i.getContext("2d");return i.width=t,i.height=e,n.appendChild(i),{canvas:i,ctx:r,remove:function(){n.removeChild(i)}}}function d(t,e){var n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],y(s("assets"))),i=n.canvas,r=n.ctx,o=(n.remove,new Image);o.src=e,document.body.appendChild(o),setTimeout(function(){i.width=parseInt(o.naturalWidth),i.height=parseInt(o.naturalHeight),r.drawImage(o,0,0,o.naturalWidth,o.naturalHeight),i.id=t,i.className="assetImg",document.body.removeChild(o)})}function g(t){return[].concat(r(t)).map(function(t){return p(t)}).join("").match(/.{1,8}/g)}function m(t){return h(100)<=t}function v(t,e){var n=a(t,2).map(function(t){return t/255}),i=a(e,2).map(function(t){return t/255});return n.map(function(t,e){return n[e]<.3?2*n[e]*i[e]:1-2*(1-n[e])*(1-i[e])}).map(function(t){return p(Math.floor(255*o(t,0,1)))}).join("")}function b(t,e,n){for(var i=e.width,r=e.height,o=g(e.getContext("2d").getImageData(0,0,i,r).data),a=0,s=0;a<r;a++)for(var A=0;A<i;A++,s++)t.fillStyle="#"+v(n,o[s].slice(0,6))+o[s].slice(-2),t.fillRect(A,a,1,1)}function w(){return new Promise(function(t){d("base",j.BASE),d("pants",j.PANTS),d("shirt",j.SHIRT),d("vest",j.VEST),d("bib",j.BIB),d("eyes",j.EYES),d("hair01",j.HAIR01),d("hair10",j.HAIR10),d("hair02",j.HAIR02),setTimeout(function(){return t()})})}function E(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function k(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t){var e=this;this.id=t||"jan_"+z++,this.config=C.shuffle(),this.create=function(){var t=s("base"),n=t.width,i=t.height,r=y(n,i),o=r.canvas,a=r.ctx,u=r.remove,h=["base","eyes","pants","shirt","vest","bib","hair01","hair10","hair02"];return new Promise(function(t){h.forEach(function(t){e.config[t]&&b(a,s(t),e.config[t])});var n=A("div");c(document.body,n).id=e.id,n.style.backgroundImage="url('"+o.toDataURL("image/png")+"')",n.style.width="24px",n.style.height="32px";var i={w:24,h:32},r=new J(n,3,4,i);r.addAnimation("left",[4,3,4,5]),r.addAnimation("right",[10,9,10,11]),r.addAnimation("up",[1,0,1,2]),r.addAnimation("down",[7,6,7,8]),u(),t(r)})}}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function S(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function U(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function O(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function Q(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function V(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var N=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),P=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),this.x=e,this.y=n,this.z=r}return N(t,[{key:"clamp",value:function(e,n){return new t(o(this.x,e.x,n.x),o(this.y,e.y,n.y))}},{key:"mul",value:function(e){return new t(this.x*e,this.y*e)}},{key:"add",value:function(e){return new t(this.x+e.x,this.y+e.y)}},{key:"sub",value:function(e){return new t(this.x-e.x,this.y-e.y)}},{key:"flat",value:function(e){return new t(this.x*e.x,this.y*e.y)}},{key:"angle",get:function(){return Math.atan2(this.y,this.x)}}],[{key:"right",value:function(){return new t(1,0)}},{key:"top",value:function(){return new t(0,1)}}]),t}(),T=320,K=500,D=(new P(K,T),new P(1/K,1/T),Math.PI,A("div"));D.className="assets",c(document.body,D).id="assets";var j=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({FOOD:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH8AAAAoCAMAAADg6NVuAAAAHlBMVEVHcEz/3QHvEBYAAAD9chm2DAzHhQCJRhRa/x/////N/dkqAAAAAXRSTlMAQObYZgAAAeZJREFUWMPdmIuSgyAMRYUEXf7/hxeSAPJUxbbbzUxbIownhEuwLsu7DJx1utS6qmWRL/+r+Mv1cMsNmMYrpRR8ig8eD70UKGtXFYMQdGj9A77QtTbGtALwcBWDWNn1bUZb+xDfdPhhrqu3mu8+89kHw6ZbS/BaPiAGvjZmxE/5L9yn+C6AR/hQ2vHWp8mb4/nvsh7dZ/gcQJfPJG6p4fwBEAuDsfhJ/z4C7aUIc3yig7UBTa1uCojvFcD1R7X49YLn7vKH+JJ8iIsA8UqTTuid0WY4UNNIXq/gkzIGVvHdtYTW7HX4SlmRIEVCzjS/ZS0+bz1CUkucQgJfxD8tk8hHEYCI3/v4zfytb1CJT4fqJ9pPv/sILq7/6elTyQ3iz3ehKvY012YArXdUcYtkfZQP8NM3qOmmWAEpwkURkkDB2hRBcmf4+hIfIOOLW+Vf+sPAOHypxtFtMVW/8BAqkdzjI3UgyojkZqM2f8Xks989hAHgtt3T3yxfm0n+ifpLfApRUo+7+Rs+txKfSoC1NiWeWtZfAjh8+LrC111+qkFZGlrb+nj3Cx/jKmXGPXf55/7yuHqMQ9sqftO+k+/uKIdSB+2Pq6oEt/C3/3Vd5Z8906+88Bmc1XW5fJg/Pizf99Lrk/xD+wU+BiPu8Kq0SgAAAABJRU5ErkJggg==",SHIT:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAFVBMVEVHcEx7RhtUIALt7e1qNQuEWjYAAADqyk4mAAAAAXRSTlMAQObYZgAAANZJREFUOMt9kkkCxCAIBKVG8v8nj6IiJmqfCBaELaW3ANJFIDcCQEhcwkXyLV4MOCcQ0xGgA0diAPnQhidQ3QI4sCdAIQ9kUwYWx5GwJwU8CdsRGFL0TYH8ilruauUXUL3PY4Q2a50FULzFr4VolsRWQdSBji5V4HHTWtYaALJ8AZtBK00BL5cJNKJ4VRVawzkkiCNWBVyjhUiIWnJQNQJEzMy/IO2C1LY0fj0Udkr/80LEpc9Dc2KWswC9NFv3cjbx0OopdKZifRTuGM8jT2YZVZxNmh9/TSQGGVduCLwAAAAASUVORK5CYII=",BASE:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAIVBMVEUAAABAQEC/v7+ZmZllZWXf399JSUn6+vrX19d9fX1BQUG33NESAAAAAXRSTlMAQObYZgAAAvlJREFUWMPtll1u1DAUhcfSLMB/XYCvm4J4czIIHsed2UCDglQeK7EB2AGsoRtAYp8kTZtzb24rqEAIlebp+nzn2olnbJ3Nk3mMc/anIDR9kboGph2GbIWugWmGobdS14CGgWSDBoGanorQNYgtUa5C18BMtRW6BuZAtLNKB5jbu64qHQAbKHUNTCAq9r4d90TuruyIunQ7cERpmSiPwN6Wk6m9HYz1WKJ7V2Z9Ny13mEk4sFnDBOpc1qmOc0ec6nJnQrcvniiFhFmFKd6YYp1Msd6YKjOZHEbg5tpOJmPnjxvr0tq7l83t8qle1tNrzB2xeIASUKdQ3bL9FUCYyvh2jzKZGgoA6lCifaTJRYD9FnUVB9UsH+Esrzf/4/Nrl9gwFKlrYF7T8M5KHYCd/2EvdQ3In33cS12D1L78vmrQoJ6/uNYNAMuJtEoHmMmxKytdg41zSldgE2i/0jUwxe+FDtDC5GGCvgbBiwaYYmGmc9SdF8tZmNICtmK5Fkc7sFlD4iaK7NR63OOFYAp9AWiJLd1YmPIOoAWIHTP5HGE6MFNpmeki4jfCNwiTOS/ChEnr4QJ7Zk29z3S0vMMahzXYieIDcRydk4Mn9fzt/ESk8pMCND6yQYNwdnV2VYSuQXz77dXXKnQNzJvry89W6wDzv7ffWa0DzKclV60DYAOh/05+avoH8lPTIz81PfJT048lupGfmh75ic0aRoD81PTIT2NdmAn5qemRn1Ym5KemR37ipvpgfsLFFWtulzN/IutYca96gBJQp1Dtn89P7uFo5J7zk37+2fw00Co/abAdiLIVugbb91eJVg0afPiS/apBg8tPp1E2aGCISpW6BpvQHZUOgL1RugJbKkpXYJuC5TpAZiAlq3QFUpENGHQAp8wUquXLITN5mIxYLvvCutlBzcxEAfd4CuxwEkymZ0tQRkNoCjN1FXVGw6FlphyYaQdTbZM04W03eKcTmE52Ee3CFE6Zbo73maI1nUXHxvEBu4awgo5MMlr9ALYh0E4fpvVoAAAAAElFTkSuQmCC",PANTS:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAFVBMVEUAAAAvLy9WVlYUFBRwcHAcHBw2NjYwbVZvAAAAAXRSTlMAQObYZgAAAR9JREFUWMPtlkGKhDAURI2ZAyQhs/cHDxAI9noULzCIfYFm7n+FcWOqhJahGVw0/MJF1f8v4Kr4jUqlukJmN37T7t0BoUVISQ7jZ4soYeQ5IFrEo38RMucQ/t0ueBGE/ZABleGx259s7/vmtpTcQKVUPm8fpiqV6n8Kp+XEUPfhnr/uO/jUA2rJh9nXYNIMHxiaAkEjClAIiiPqhqEgFLisDBrQfvswUkDdGJSpXTNB68OiiIZ7tSVzKIeqysegUqmult+E9Or91MrZ/RS6C+4nfw55vZ9UqjeT/EmYr5Yhh8XUkU+A2kloIa76OcH7mSFqj0iQ9ELzgEBQlMj3k//M6EBHNcSQXTPa1KGGtsc1LLY0CKitfFsrhB5C4Ib6BbyVM6s+u6MNAAAAAElFTkSuQmCC",SHIRT:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAD1BMVEUAAACrq6twcHCCgoKVlZXdkPLBAAAAAXRSTlMAQObYZgAAARFJREFUWMPtlkuOxCAMRE06B+CTA4CYAzR0DkAm97/TEImxjZoovWkpC79VxVWGrFCBIHyRKW5L9iPnMJpMpuLYHLcPo23PmzFLeZ9DqIZ74lF40KPqxf7P64fFq43BK0JdcNy40B+GJvw/hOaCINyEqK+NKYfC58xIBXUIpPOGujdSYjqwUNQeNSgyFA/tQBqADEgstALHkwxMv+CEH3mfBOEmTBFg3J8Oo8nVlNnsbI7b1XBtWx39Sbd5KnPXn5ZRf9p4f1qN+cUnote7g8Z8HqL36dEM7EwUegLSDIQWQBCEu6DytaFs9MMF5ciYrPXdnAxHIef4Ag9p0hoopDILua4/8Tp0GoJx6LQ/vUD4nD/QriHqbTirogAAAABJRU5ErkJggg==",VEST:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACAAgMAAADVOMcNAAAADFBMVEUAAABgYGA3NzdSUlI3hTwnAAAAAXRSTlMAQObYZgAAAPBJREFUSMftlC0OwkAUhB/lP2lCFRhCiiT8VUCCRCJr6gggOQJB9QgIroGjCbJHqOAQyBoSJOzsNm+TIgiKko6YnW/Gbh7l+kqGb/hMvvGygufNkbF7ntjva851AAUrwrARzxQQSF+SAt35Oe21arjDk+Rc/6ZaGka+yoBQeO+gMoNtCe8iU5+4IlkNZEVQBB9L0KuGBAcew1kYcmVZb+5X0S2HfL/cqtivLZGjMu4XgI5NwoD7NekIP0tv0+dVCWA6qCxiIJnz/5V12SkwLtpQBFS2KgMW+Bk1NeAhrugGr+oncZZUrId2v0yCYgU/qCdIPDZcX7tWzwAAAABJRU5ErkJggg==",BIB:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAHlBMVEUAAACKioqmpqY4ODhTU1Nvb296enplZWVPT0/CwsI7IqY1AAAAAXRSTlMAQObYZgAAAXNJREFUWMPtlL1PwzAUxF0SaMemNDs1CMRmEBVrCkGsrVqLFTG4a8WXYGNjZ+HfxXzUd+ERqVtF65Mine9+T4pi5amoqDVTYr4fqc9i7tMiLUQeChxEjkJK5ubnnX75pUGmFvJPVNTK6WWRoilzWTScyGXR6FZziIrNczkg/1aCeMAwz1BJPmEmHRNEPi0IO9uFv7CGDjkOA4LSTh20TVBGUNMaDIwV9ECQesIFXN5R/mhUVNRqqYV9IwtaNjORo6j18rCl1DVy7yEcNrTewQCLikaWtWkAjG/ysLasHc796ItHU86t9QrbyfNQlk+C9QqrY5QRo3sWXofGduBVRx/m8LoX3unNe4Le/4KeGbrROnynW60PwnfSej9AzjlsLeemlSIq6h+ptUgxE7ksXFvkshi0RS6LkyHlsFx4T7mpQCVDrAS2X5IvGDLA7QTx8R4haQGoVxDURT6i4SQj6KgOulJQH0ViZwRNCTq9x6W8qqXoA3WjOmFOISczAAAAAElFTkSuQmCC",EYES:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAElBMVEUAAAAwMDD6+vrX19c/Pz8TExPVZTWmAAAAAXRSTlMAQObYZgAAAFtJREFUWMPt1rsNwCAMRVHMp/cIjMAIjMD+06REzhNKpDQp7inf7S0nAABOzF+EsmTXkKfsGlLcAeDE3PwxlNXGbdeQZ+2y77CFHQA+fU9tyK6h9rBLEFwn/NsF2lYGYaXjXh8AAAAASUVORK5CYII=",HAIR01:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACAAgMAAADVOMcNAAAADFBMVEUAAABCQkJRUVFdXV2yGluKAAAAAXRSTlMAQObYZgAAALpJREFUSMft1CEOwkAUhOFpgSV1GAT1SO7QIxCCQFYQBAmWINdQvanA1dVwix6BI9GEmbyEcgAgO+r/8vzDly8F/Bsyn5ZsYbpbPtiCOzWBLeB2UAvISrYB6ri410arAdIz25AEtiGpnWcLSFq1ABzZBszVBnXcz+zT/+pGJVtwQGALY2CmFuwgJNWmYPe41j2wX4AHAXnLNkzWbAPUcX+3SzdA49kGV7CFNFSFWsitCdzBNmzVBnWc7QnlqzyXT5hm2wAAAABJRU5ErkJggg==",HAIR10:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAElBMVEUAAABfX19OTk5zc3NnZ2d/f38hkxwfAAAAAXRSTlMAQObYZgAAAKRJREFUWMPtljEKwkAQRX8mOUDW9QCjYJ9iDxAJ9uL9D2O6MLwigiCi86r57/XL6r8YpW4vWGnt6MEzeKu3asEzaCh1jp5hHaPot0BWnyTJz3F+IViBZzgtEzzCpSzwCD7DM7joGXhzRJ8kyUfopHE3VOkaPYPdpd6DZ/BpvQ1+CxvBJ0mSvPeFUnF4hL4d4BFaecAjaDB4BMngEXBjgHwzk+/lCa77EuKvhU8sAAAAAElFTkSuQmCC",HAIR02:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAElBMVEUAAABRUVFnZ2c4ODiAgICOjo7xpgV8AAAAAXRSTlMAQObYZgAAALRJREFUWMPtljsOwjAUBF9i6ONg+jif3sSixzlC7n8YFIpIqy1CARJIO8WTPXOBtS9y7t4IbSTP4RrBQzh64+c+kOcwD+Q5VA15Di6R52DohRC/wjgehz60E3oOdWl96MBzKIPZbQJPoRobM/cAT8H57aKn4PJ2wXOwTJ6DoRdC/Nt+0jQSQnyWZTkOayw9eg518TF04DmsF7M5gOdwSmbV0oCHsOMTeAg7OZHnkMFrRAnx4gmz6R67Eo5f8gAAAABJRU5ErkJggg=="},"SHIT","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAFVBMVEVHcEx7RhtUIALt7e1qNQuEWjYAAADqyk4mAAAAAXRSTlMAQObYZgAAANZJREFUOMt9kkkCxCAIBKVG8v8nj6IiJmqfCBaELaW3ANJFIDcCQEhcwkXyLV4MOCcQ0xGgA0diAPnQhidQ3QI4sCdAIQ9kUwYWx5GwJwU8CdsRGFL0TYH8ilruauUXUL3PY4Q2a50FULzFr4VolsRWQdSBji5V4HHTWtYaALJ8AZtBK00BL5cJNKJ4VRVawzkkiCNWBVyjhUiIWnJQNQJEzMy/IO2C1LY0fj0Udkr/80LEpc9Dc2KWswC9NFv3cjbx0OopdKZifRTuGM8jT2YZVZxNmh9/TSQGGVduCLwAAAAASUVORK5CYII="),G=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),J=function(){function t(e,n,i,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};k(this,t),this.img=e,this.img.width=r.w,this.frame=r,this.frames=[],this.framesDef=[],this.animations={},this.img.style.position="absolute",this.ticksPerFrame=o.ticksPerFrame||16,this.action="";for(var a=0;a<i;a++)for(var s=0;s<n;s++)this.framesDef.push({x:r.w*s,y:r.h*a});this.frames=[this.framesDef[0]],this.curFrame=0,this.tickCount=0}return G(t,[{key:"addAnimation",value:function(t,e){this.animations[t]=[].concat(E(e))}},{key:"setAction",value:function(t){var e=this;this.action=t,this.frames=this.animations[t].map(function(t){return e.framesDef[t]})}},{key:"setParent",value:function(t){c(t,this.img)}},{key:"render",value:function(){var t=this.img,e=(this.frames,this.frame,this.curFrame),n=this.frames[e];t.style.backgroundPositionX=n.x+"px",t.style.backgroundPositionY=n.y+"px"}},{key:"update",value:function(t){t?(this.tickCount=0,this.curFrame=0):++this.tickCount>this.ticksPerFrame&&(this.tickCount=0,this.curFrame<this.frames.length-1?this.curFrame+=1:this.curFrame=0)}}]),t}(),Y={skin:["dc9108","e8c7a1","be8e66","99633c","4c3732"],eyes:["277bc4","367865","9f5924"],hairs:{standard:["d24122","9b5324","141414","b4bac4"],rogue:["1c6f0b","2093bf","ca0c2a","3f1695"]}},z=0;C.shuffle=function(){var t={base:Y.skin[h(Y.skin.length-1)],eyes:Y.eyes[h(Y.eyes.length-1)],pants:f(64,128),shirt:m(80)?f(64,192):null,vest:m(10)?f(32,64):null,bib:null,hair01:null,hair10:null,hair02:null};t.bib=t.shirt||t.shirt||!m(30)?null:f(64,192);var e=m(60)&&"standard"||m(30)&&"rogue"||null,n=e?Y.hairs[e][h(Y.hairs[e].length-1)]:null;return t.hair01="standard"==e?m(70)&&n||null:null,t.hair10="standard"==e&&t.hair01?m(50)&&n:null,t.hair02="rogue"==e?n:null,t};var L=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),H=function(){function t(){x(this,t),this._entity=null,this.position=new P(K/2,T/2),this.zoom=800,this.instance=null}return L(t,[{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._entity&&(this.position.x=this._entity.position.x+t,this.position.y=this._entity.position.y+e)}},{key:"follow",value:function(t){this._entity=t}}],[{key:"instance",value:function(){return this}}]),t}(),W=new H,Z=A("style");c(c(document.head,Z),document.createTextNode(""));var q=0,X=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();!function(t){Z.sheet.insertRule(t,q++)}("\n.bricks { \n    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAoCAMAAACLrFl+AAAAP1BMVEVcaHRPWVhodINzf5CJjqNxfY1AQzxOWFZeanZyfo4/QjpUYWhfbHJNV1V/hppUYmhFT0hocoBVYmlYYGVodIW6L+cIAAACp0lEQVQ4y21V25bCIAyEIpDU1qrr/3/rZiaB1j2bB9uUTMh1TDlvtd5cHvFW6yPU/97SF0QDon6sOgzPN4O0tt1uKd27yT3Jbo9dTN0TROE+3hY8zOeAHA5JeHSBKrAoapKSSFK9QH7gZ9GSZIHBx86pmgjd0KFfhVsJUdgoIdXvhzohIu98hTB93oqQdoVClT9ibkrvOfcI8eUQ9y04sJMaHiL4V1XmR19+fWvdy2GQN9J4VcaUZiQWMdKv041DPLD7SANQ2JmheiHcpLA4hJzp87j3A5kfgGxR7qiGyRXyXSf+qG5RX1wakJzfcWvkK16neSm6qCjbQZwhB4T9lRFDQAqzKgEZpxHYHfffUeRlVoNyzH4ePZpzQvBxd0i1+wZE5tSMfrKVEe02Cso6eWDTt0Gygw1SikPwxsqUsuUs8oH6pu9SMGgmb6b/XFeG0FpbV3PU87q2Rs3UDN/P+NLa03KmDsO+Qvp8IyYSeq5DAFEsrfrmxjZbGCaIU/klTh/4am8Oqd8QDmOfpDCoALMMCOq7R4/GxnNfe37x2DeAMkf8yGOKuPE+wRPCGVlwga9BurRojARxS9X1wiNb1Vi2I8JxyD7nApDyBfE5L97KGMY7ZuUcAUJIPeisj3gaIx4jH3OB0nKIEdhP5BvEIWPE41bxq6zZB4b4hfQH9cTaHaNeGMtyViym3SFBa76QTiYOIaMunoZGEHawntRDNzCUCGxCfA1iNWVST0Bohw45Hzqv5GPWfAlIci4/eXPjHwE3yaloltsga8tOZ6OoC1rJWs1mkYBYaQaWPfggfSGES/ofRP9A5GSd8DACSylNUkqXwPh3o4PlUHBZfOP/SgMkZMHafUIZi/z0xc7cXxLAVH3jsdpuB7owf9khOdMCVJJP9Xpgdr/tGCp+PWN8aQAAAABJRU5ErkJggg==');\n    background-size: 15px;\n}");var _=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;U(this,t),this.parent=s("layer_middle"),this.createCity(e)}return X(t,[{key:"createCity",value:function(t){for(var e=0;e<t;e++)this.createBuilding()}},{key:"createBuilding",value:function(){var t=o(50*Math.ceil(h(3)),150,250),e=o(50*Math.ceil(h(7)),150,350),n=o(50*Math.ceil(h(6)),150,300),i=new Array(5);i=i.fill(1).map(function(){return A("div")});var r=["","front","left","right","top"];i.forEach(function(i,o){i.className=o?"bricks side "+r[o]:"building",i.style.width=((o<2||o>3)&&t||n)+"px",i.style.height=(o<4&&e||n)+"px"}),c(this.parent,i[0]),c.apply(void 0,[i[0]].concat(S(i.slice(1))))}}]),t}(),$=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),tt=function(){function t(e){B(this,t),console.log("Entity:","constructor()"),this._conf=e,this.sprite=e.sprite,this.position=e.position||{x:0,y:0,z:0},this.width=e.width,this.height=e.height,this.rotation=0,this.velocity=1}return $(t,[{key:"update",value:function(){var t=this.position,e=t.x,n=t.y,i=t.z;this.sprite.img.style.transform="translate3d("+e+"px,"+n+"px,"+i+"px)",this.sprite.update(),this._conf.onUpdate&&this._conf.onUpdate()}},{key:"render",value:function(){this.sprite.render(),this._conf.onRender&&this._conf.onRender()}}]),t}(),et={};et.State={},et.State.Up=0,et.State.Pressed=1,et.State.Down=2,et.Key={},et.Key.Up=87,et.Key.Left=65,et.Key.Down=83,et.Key.Right=68,et.Key.R=82,et.Key.F=70,et.Keys={},et._keydown=function(t){var e=t.which;et.Keys[e]||et.Keys[e]===et.State.Up||(et.Keys[e]=et.State.Up),et.Keys[e]===et.State.Pressed&&(et.Keys[e]=et.State.Down),et.Keys[e]===et.State.Up&&(et.Keys[e]=et.State.Pressed)},et._keyup=function(t){var e=t.which;et.Keys[e]=et.State.Up},et.init=function(){document.body.addEventListener("keydown",et._keydown),document.body.addEventListener("keyup",et._keyup)};var nt=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),it=function(t){function e(t){R(this,e);var n=I(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.health=100,t.sprite.img.id="player",c(s("layer_street"),t.sprite.img),n.initHealthBar(),n.distance=s("scores"),n.velocity=2,n}return O(e,t),nt(e,[{key:"initHealthBar",value:function(){this.hbar=A("div"),this.hbar.style.width=0,this.hbar.style.height="100%",this.hbar.style.background="darkslategrey",c(s("health-bar"),this.hbar)}},{key:"moveRight",value:function(){this.sprite.setAction("right"),this.position.x+=this.velocity}},{key:"moveLeft",value:function(){this.sprite.setAction("left"),this.position.x-=this.velocity}},{key:"moveDown",value:function(){this.sprite.setAction("down"),this.position.y+=this.velocity}},{key:"moveUp",value:function(){this.sprite.setAction("up"),this.position.y-=this.velocity}},{key:"hit",value:function(){this.health-=10,this.hbar.style.width=100-this.health+"%"}},{key:"update",value:function(){this.distance.innerHTML=this.position.x-50,et.Keys[et.Key.Right]>et.State.Up&&this.moveRight(),et.Keys[et.Key.Left]>et.State.Up&&this.moveLeft(),et.Keys[et.Key.Up]>et.State.Up&&this.moveUp(),et.Keys[et.Key.Down]>et.State.Up&&this.moveDown(),this.position.y=o(this.position.y,-25,50),this.position.x=o(this.position.x,50,5e5);var t=0;Object.keys(et.Keys).forEach(function(e){return t+=et.Keys[e]}),this.sprite.update(!t),this.sprite.img.style.transform="translate3d("+this.position.x+"px,"+this.position.y+"px,"+this.position.y+"px)"}}]),e}(tt),rt=n(1),ot=(n.n(rt),function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),at=function(t){function e(t){M(this,e);var n=new Image;n.src=j.SHIT,n.style.width="20px",n.style.height="20px",n.style.zIndex=10,n.id="emiter",t.sprite=new J(n,1,1,{w:10,h:10});var i=F(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.player=t.player,i.counter=100,i.counterBase=500,i.shots=[],i.lastShot=0,i.speedShot=1,i.velocity=.02,i.initShots(),i}return Q(e,t),ot(e,[{key:"setParent",value:function(t){this.sprite.setParent(t),this.shots.forEach(function(e){return e.sprite.setParent(t)})}},{key:"initShots",value:function(){for(var t=0;t<10;t++){var e=A("div");e.style.backgroundImage="url("+j.FOOD+")",e.style.width="20px",e.style.height="20px",e.style.backgroundSize="64px 20px",e.className="shot";var n=new J(e,3,1,{w:42,h:40});n.addAnimation("food0",[0]),n.addAnimation("food1",[1]),n.addAnimation("food2",[2]),this.shots.push(new tt({position:{x:-100,y:0,z:0},sprite:n}))}}},{key:"emit",value:function(){var t=this.position,e=t.x,n=t.y;t.z;console.log("emit",this.lastShot);var i=this.shots[this.lastShot++];this.lastShot=this.lastShot%10,n=35*Math.cos(n)+30,i.position.x=e,i.position.y=n,i.sprite.setAction("food"+(h(3)-1)),this.velocity+=.001,this.velocity=o(this.velocity,.02,1)}},{key:"update",value:function(){var t=this,e=this.position,n=e.x,i=e.y,r=e.z,a=this.player.position,s=a.x,A=a.y;this.position.y+=this.velocity,this.speedShot+=.002,this.shots.forEach(function(e){var n=e.position,i=n.x,r=n.y;u(s,A,i,r)<20&&(e.position.x=-100,t.player.hit()),e.position.x-=o(t.speedShot,2,15),e.update()}),this.sprite.img.style.transform="translate3d("+n+"px,"+(35*Math.cos(i)+20)+"px,"+r+"px)",this.sprite.update(),--this.counter<0&&(console.log("emit",this.counter),this.counterBase-=30,this.counterBase=o(this.counterBase,100),this.counter=o(h(50,this.counterBase),50,this.counterBase),this.emit()),this._conf.onUpdate&&this._conf.onUpdate()}},{key:"render",value:function(){this.sprite.render(),this.shots.forEach(function(t){return t.render()}),this._conf.onRender&&this._conf.onRender()}}]),e}(tt),st=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),At=function(){function t(){V(this,t),this.init(),this.entities=[],this.counter=100}return st(t,[{key:"init",value:function(){var t=this;this.initCanvases(),et.init(),w().then(function(){t.initPlayer(),t.initCity(),t.loop()})}},{key:"gameOver",value:function(){this.loop=function(){},s("game-over").style.display="block",s("game-over").innerHTML="GAME OVER<br>Your scores: "+(this.player.position.x-50)}},{key:"initPlayer",value:function(){var t=this;(new C).create().then(function(e){t.player=new it({position:new P(50,0),sprite:e}),W.follow(t.player),t.entities.push(t.player),t.initEnemy()})}},{key:"initCity",value:function(){this.city=new _(25)}},{key:"initEnemy",value:function(){this.enemy=new at({posision:new P(10,10),player:this.player}),this.entities.push(this.enemy),this.enemy.setParent(this.layerStreet)}},{key:"initCanvases",value:function(){var t=this;this.streetLength=5e4,this.container=s("game"),this.canvas=A("canvas"),this.canvas.style.transform="translate3d(0,0,0)",this.ctx=this.canvas.getContext("2d"),this.layerMiddle=s("layer_middle"),this.layerStreet=s("layer_street"),this.layerStreet.style.width=this.streetLength+"px",c(this.container,this.canvas);var e=function(){t.canvas.width=K,t.canvas.height=T,t.canvas.webkitImageSmoothingEnabled=!1,t.canvas.mozImageSmoothingEnabled=!1,t.canvas.imageSmoothingEnabled=!1};e(),window.addEventListener("resize",e)}},{key:"loop",value:function(){var t=this;window.requestAnimFrame(function(){return t.loop()}),this.player.health<=0&&this.gameOver();var e=Date.now();this.lsts||(this.lsts=e);var n=(e-this.lsts)/1e3;this.lsts;this.lsts=e,this.ctx.clearRect(0,0,K,T);try{this.update(n),this.render()}catch(t){console.log(t,"warning")}}},{key:"update",value:function(t){W.update(-50),this.layerMiddle.style.perspectiveOrigin=W.position.x+230+"px "+.1*-W.position.y+"px",this.layerMiddle.style.transform="translate3d("+-W.position.x+"px,0,-10px)",this.layerStreet.style.transform="translate3d("+-W.position.x+"px,0,0)",this.entities.forEach(function(e){return e.update(t)}),this.enemy.position.x=W.position.x+400}},{key:"render",value:function(){this.entities.forEach(function(t){return t.render()})}}]),t}();window.addEventListener("load",function(){new At}),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var ct=n(3);n.n(ct)},function(module,exports,__webpack_require__){function Context(){}var indexOf=__webpack_require__(2),Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var n in t)e.push(n);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,n){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:n})}}catch(t){return function(t,e,n){t[e]=n}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var n=e.contentWindow,i=n.eval,r=n.execScript;!i&&r&&(r.call(n,"null"),i=n.eval),forEach(Object_keys(t),function(e){n[e]=t[e]}),forEach(globals,function(e){t[e]&&(n[e]=t[e])});var o=Object_keys(n),a=i.call(n,this.code);return forEach(Object_keys(n),function(e){(e in t||-1===indexOf(o,e))&&(t[e]=n[e])}),forEach(globals,function(e){e in t||defineProp(t,e,n[e])}),document.body.removeChild(e),a},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),n=this.runInContext(e);return forEach(Object_keys(e),function(n){t[n]=e[n]}),n},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var n=Script(e);return n[t].apply(n,[].slice.call(arguments,1))}}),exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(n){e[n]=t[n]}),e}},function(t,e){var n=[].indexOf;t.exports=function(t,e){if(n)return t.indexOf(e);for(var i=0;i<t.length;++i)if(t[i]===e)return i;return-1}},function(t,e){}]);</script></body>

</html>