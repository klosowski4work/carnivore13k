<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>The lost ones</title>
<style type="text/css">#home{display:block;width:200px;height:200px;background-color:red}body{image-rendering:pixelated}#x{display:none}canvas{background-color:#3cb371}</style></head>
<body>
<div id="game"></div>

<script type="text/javascript">!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function i(t,e){var n=this;n.x=t,n.y=e,n.mul=function(t){return new i(n.x*t,n.y*t)},n.clamp=function(t,e){return new i(clamp(n.x,t.x,e.x),clamp(n.y,t.y,e.y))},n.add=function(t){return new i(n.x+t.x,n.y+t.y)},n.sub=function(t){return new i(n.x-t.x,n.y-t.y)},n.flat=function(t){return new i(n.x*t.x,n.y*t.y)},n.angle=function(){return Math.atan2(n.y,n.x)},n.clone=function(){return new i(n.x,n.y)}}function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e,n){return t<e?e:t>n?n:t}function o(t,e){try{if(e){var n=new RegExp(".{1,"+e+"}","g");return t.match(n).map(function(t){return parseInt(t,16)})}return parseInt(t,16)}catch(t){console.log(t)}}function A(t){return document.getElementById(t)}function s(t){return document.createElement(t)}function u(t,e){return t.append(e),e}function c(t){return Math.ceil(Math.random()*t)}function l(){return[c(255),c(255),c(255)]}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;return[].concat(a(l())).map(function(n){return d(r(n,t,e),2)}).join("")}function f(){return[].concat(a(l()),[255]).map(function(t){return d(t,2)}).join("")}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return("0".repeat(e)+t.toString(16)).slice(-e)}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,e=s("canvas"),n=e.getContext("2d");return t.appendChild(e),{canvas:e,ctx:n,remove:function(){t.removeChild(e)}}}function g(t,e){var n="";return"#"===t[0]&&(t.slice(1),n="#"),n+t.match(/.{1,2}/g).map(function(t,n){return n<3?d(r(o(t)+e,0,255)):t}).join("")}function v(t,e){var n=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],m(A("assets"))),i=n.canvas,a=n.ctx,r=(n.remove,new Image);r.src=e,document.body.appendChild(r),setTimeout(function(){i.width=parseInt(r.naturalWidth),i.height=parseInt(r.naturalHeight),a.drawImage(r,0,0,r.naturalWidth,r.naturalHeight),i.id=t,i.className="assetImg",document.body.removeChild(r)})}function p(t){return[].concat(a(t)).map(function(t){return d(t)}).join("").match(/.{1,8}/g)}function y(t){return c(100)<=t}function w(t,e){var n=o(t,2).map(function(t){return t/255}),i=o(e,2).map(function(t){return t/255});return n.map(function(t,e){return n[e]<.3?2*n[e]*i[e]:1-2*(1-n[e])*(1-i[e])}).map(function(t){return d(Math.floor(255*r(t,0,1)))}).join("")}function E(t,e,n){for(var i=e.width,a=e.height,r=p(e.getContext("2d").getImageData(0,0,i,a).data),o=0,A=0;o<a;o++)for(var s=0;s<i;s++,A++)t.fillStyle="#"+w(n,r[A].slice(0,6))+r[A].slice(-2),t.fillRect(s,o,1,1)}function C(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function b(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function k(){(new x).createPeoples(2048)}function F(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function U(){function t(){setTimeout(function(){e--&&(new O).create().then(function(){return t()})})}var e=256;t()}function B(){return new Promise(function(t){v("base","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAIVBMVEUAAABAQEC/v7+ZmZllZWXf399JSUn6+vrX19d9fX1BQUG33NESAAAAAXRSTlMAQObYZgAAAvlJREFUWMPtll1u1DAUhcfSLMB/XYCvm4J4czIIHsed2UCDglQeK7EB2AGsoRtAYp8kTZtzb24rqEAIlebp+nzn2olnbJ3Nk3mMc/anIDR9kboGph2GbIWugWmGobdS14CGgWSDBoGanorQNYgtUa5C18BMtRW6BuZAtLNKB5jbu64qHQAbKHUNTCAq9r4d90TuruyIunQ7cERpmSiPwN6Wk6m9HYz1WKJ7V2Z9Ny13mEk4sFnDBOpc1qmOc0ec6nJnQrcvniiFhFmFKd6YYp1Msd6YKjOZHEbg5tpOJmPnjxvr0tq7l83t8qle1tNrzB2xeIASUKdQ3bL9FUCYyvh2jzKZGgoA6lCifaTJRYD9FnUVB9UsH+Esrzf/4/Nrl9gwFKlrYF7T8M5KHYCd/2EvdQ3In33cS12D1L78vmrQoJ6/uNYNAMuJtEoHmMmxKytdg41zSldgE2i/0jUwxe+FDtDC5GGCvgbBiwaYYmGmc9SdF8tZmNICtmK5Fkc7sFlD4iaK7NR63OOFYAp9AWiJLd1YmPIOoAWIHTP5HGE6MFNpmeki4jfCNwiTOS/ChEnr4QJ7Zk29z3S0vMMahzXYieIDcRydk4Mn9fzt/ESk8pMCND6yQYNwdnV2VYSuQXz77dXXKnQNzJvry89W6wDzv7ffWa0DzKclV60DYAOh/05+avoH8lPTIz81PfJT048lupGfmh75ic0aRoD81PTIT2NdmAn5qemRn1Ym5KemR37ipvpgfsLFFWtulzN/IutYca96gBJQp1Dtn89P7uFo5J7zk37+2fw00Co/abAdiLIVugbb91eJVg0afPiS/apBg8tPp1E2aGCISpW6BpvQHZUOgL1RugJbKkpXYJuC5TpAZiAlq3QFUpENGHQAp8wUquXLITN5mIxYLvvCutlBzcxEAfd4CuxwEkymZ0tQRkNoCjN1FXVGw6FlphyYaQdTbZM04W03eKcTmE52Ee3CFE6Zbo73maI1nUXHxvEBu4awgo5MMlr9ALYh0E4fpvVoAAAAAElFTkSuQmCC"),v("pants","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAFVBMVEUAAAAvLy9WVlYUFBRwcHAcHBw2NjYwbVZvAAAAAXRSTlMAQObYZgAAAR9JREFUWMPtlkGKhDAURI2ZAyQhs/cHDxAI9noULzCIfYFm7n+FcWOqhJahGVw0/MJF1f8v4Kr4jUqlukJmN37T7t0BoUVISQ7jZ4soYeQ5IFrEo38RMucQ/t0ueBGE/ZABleGx259s7/vmtpTcQKVUPm8fpiqV6n8Kp+XEUPfhnr/uO/jUA2rJh9nXYNIMHxiaAkEjClAIiiPqhqEgFLisDBrQfvswUkDdGJSpXTNB68OiiIZ7tSVzKIeqysegUqmult+E9Or91MrZ/RS6C+4nfw55vZ9UqjeT/EmYr5Yhh8XUkU+A2kloIa76OcH7mSFqj0iQ9ELzgEBQlMj3k//M6EBHNcSQXTPa1KGGtsc1LLY0CKitfFsrhB5C4Ib6BbyVM6s+u6MNAAAAAElFTkSuQmCC"),v("shirt","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAD1BMVEUAAACrq6twcHCCgoKVlZXdkPLBAAAAAXRSTlMAQObYZgAAARFJREFUWMPtlkuOxCAMRE06B+CTA4CYAzR0DkAm97/TEImxjZoovWkpC79VxVWGrFCBIHyRKW5L9iPnMJpMpuLYHLcPo23PmzFLeZ9DqIZ74lF40KPqxf7P64fFq43BK0JdcNy40B+GJvw/hOaCINyEqK+NKYfC58xIBXUIpPOGujdSYjqwUNQeNSgyFA/tQBqADEgstALHkwxMv+CEH3mfBOEmTBFg3J8Oo8nVlNnsbI7b1XBtWx39Sbd5KnPXn5ZRf9p4f1qN+cUnote7g8Z8HqL36dEM7EwUegLSDIQWQBCEu6DytaFs9MMF5ciYrPXdnAxHIef4Ag9p0hoopDILua4/8Tp0GoJx6LQ/vUD4nD/QriHqbTirogAAAABJRU5ErkJggg=="),v("vest","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACAAgMAAADVOMcNAAAADFBMVEUAAABgYGA3NzdSUlI3hTwnAAAAAXRSTlMAQObYZgAAAPBJREFUSMftlC0OwkAUhB/lP2lCFRhCiiT8VUCCRCJr6gggOQJB9QgIroGjCbJHqOAQyBoSJOzsNm+TIgiKko6YnW/Gbh7l+kqGb/hMvvGygufNkbF7ntjva851AAUrwrARzxQQSF+SAt35Oe21arjDk+Rc/6ZaGka+yoBQeO+gMoNtCe8iU5+4IlkNZEVQBB9L0KuGBAcew1kYcmVZb+5X0S2HfL/cqtivLZGjMu4XgI5NwoD7NekIP0tv0+dVCWA6qCxiIJnz/5V12SkwLtpQBFS2KgMW+Bk1NeAhrugGr+oncZZUrId2v0yCYgU/qCdIPDZcX7tWzwAAAABJRU5ErkJggg=="),v("bib","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAHlBMVEUAAACKioqmpqY4ODhTU1Nvb296enplZWVPT0/CwsI7IqY1AAAAAXRSTlMAQObYZgAAAXNJREFUWMPtlL1PwzAUxF0SaMemNDs1CMRmEBVrCkGsrVqLFTG4a8WXYGNjZ+HfxXzUd+ERqVtF65Mine9+T4pi5amoqDVTYr4fqc9i7tMiLUQeChxEjkJK5ubnnX75pUGmFvJPVNTK6WWRoilzWTScyGXR6FZziIrNczkg/1aCeMAwz1BJPmEmHRNEPi0IO9uFv7CGDjkOA4LSTh20TVBGUNMaDIwV9ECQesIFXN5R/mhUVNRqqYV9IwtaNjORo6j18rCl1DVy7yEcNrTewQCLikaWtWkAjG/ysLasHc796ItHU86t9QrbyfNQlk+C9QqrY5QRo3sWXofGduBVRx/m8LoX3unNe4Le/4KeGbrROnynW60PwnfSej9AzjlsLeemlSIq6h+ptUgxE7ksXFvkshi0RS6LkyHlsFx4T7mpQCVDrAS2X5IvGDLA7QTx8R4haQGoVxDURT6i4SQj6KgOulJQH0ViZwRNCTq9x6W8qqXoA3WjOmFOISczAAAAAElFTkSuQmCC"),v("eyes","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAElBMVEUAAAAwMDD6+vrX19c/Pz8TExPVZTWmAAAAAXRSTlMAQObYZgAAAFtJREFUWMPt1rsNwCAMRVHMp/cIjMAIjMD+06REzhNKpDQp7inf7S0nAABOzF+EsmTXkKfsGlLcAeDE3PwxlNXGbdeQZ+2y77CFHQA+fU9tyK6h9rBLEFwn/NsF2lYGYaXjXh8AAAAASUVORK5CYII="),v("hair01","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACAAgMAAADVOMcNAAAADFBMVEUAAABCQkJRUVFdXV2yGluKAAAAAXRSTlMAQObYZgAAALpJREFUSMft1CEOwkAUhOFpgSV1GAT1SO7QIxCCQFYQBAmWINdQvanA1dVwix6BI9GEmbyEcgAgO+r/8vzDly8F/Bsyn5ZsYbpbPtiCOzWBLeB2UAvISrYB6ri410arAdIz25AEtiGpnWcLSFq1ABzZBszVBnXcz+zT/+pGJVtwQGALY2CmFuwgJNWmYPe41j2wX4AHAXnLNkzWbAPUcX+3SzdA49kGV7CFNFSFWsitCdzBNmzVBnWc7QnlqzyXT5hm2wAAAABJRU5ErkJggg=="),v("hair10","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAElBMVEUAAABfX19OTk5zc3NnZ2d/f38hkxwfAAAAAXRSTlMAQObYZgAAAKRJREFUWMPtljEKwkAQRX8mOUDW9QCjYJ9iDxAJ9uL9D2O6MLwigiCi86r57/XL6r8YpW4vWGnt6MEzeKu3asEzaCh1jp5hHaPot0BWnyTJz3F+IViBZzgtEzzCpSzwCD7DM7joGXhzRJ8kyUfopHE3VOkaPYPdpd6DZ/BpvQ1+CxvBJ0mSvPeFUnF4hL4d4BFaecAjaDB4BMngEXBjgHwzk+/lCa77EuKvhU8sAAAAAElFTkSuQmCC"),v("hair02","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAACABAMAAABaeDKtAAAAElBMVEUAAABRUVFnZ2c4ODiAgICOjo7xpgV8AAAAAXRSTlMAQObYZgAAALRJREFUWMPtljsOwjAUBF9i6ONg+jif3sSixzlC7n8YFIpIqy1CARJIO8WTPXOBtS9y7t4IbSTP4RrBQzh64+c+kOcwD+Q5VA15Di6R52DohRC/wjgehz60E3oOdWl96MBzKIPZbQJPoRobM/cAT8H57aKn4PJ2wXOwTJ6DoRdC/Nt+0jQSQnyWZTkOayw9eg518TF04DmsF7M5gOdwSmbV0oCHsOMTeAg7OZHnkMFrRAnx4gmz6R67Eo5f8gAAAABJRU5ErkJggg=="),v("people","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAAAQBAMAAAAsdmq7AAAAKlBMVEVHcEwAAAD/zKoA51b/d6gAh1H/8CSrUjb/owAdK1NfV0/Cw8f/8eiDdpyQoMsPAAAAAXRSTlMAQObYZgAAAWFJREFUOMutUzFSwzAQjH6gy1wmDNBIDsxQUMAlD7CgoaDICD+AGYY+FT9wnxQ8gBYqWp4Aj+KkkxXZCdCg5rzavb2VbI9GuwtAy4Ma4LTUAA8bVft4LxvH0MdpHT6t9vZ3QtXaUxlx9Akl7iajNXlk30CIg4fNsyjV25cusExWgJt14l8/ysOwcC21SwDvVhdYJiPNbVUL76wIdTLoEphWIvvbc11gDAOUCwYzveXZSO5EoRFdVckZJ+RedIFjArRE12TrLc+eEkRdRaFyni51MmAmY0DDdzaeeaKFM5nnjpszmUxRiKZp7qKTp0W9xQyJ9GhcBwM0mc8JeFIU4gkRRoPGdXieKuMxTIiWYDIfktBFio5R6JOBn9tVYWDiPppgIAkiHxsdR1AT78OHASA1RJxG3DRLyAbAPEEQJJ4/DG6Qt+LT28t1WuwXxn2eI7ifqhj8wf+DQfcX7lY52q/8N7ZGXZrlFItTAAAAAElFTkSuQmCC","x"),setTimeout(function(){return t()})})}function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function I(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function M(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),i.zero=function(){return i.from(0)},i.one=function(){return i.from(1)},i.left=function(){return new i(1,0)},i.down=function(){return new i(0,1)},i.from=function(t,e){return new i(t,void 0===e?t:e)};var S=(new i(500,500),new i(.002,.002),Math.PI,function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}()),x=function(){function t(){b(this,t),this.bases=[],this.colors={clothes:["00e756ff","008751ff"],skin:["ffccaaff","ff77a8ff"]},this.init()}return S(t,[{key:"init",value:function(){var t=m(),e=(t.canvas,t.ctx),n=t.remove,i=A("people");e.drawImage(i,0,0,i.width,i.height);for(var a=0;a<8;a++){var r=[].concat(C(e.getImageData(16*a,0,16,16).data));this.bases.push(r.map(function(t){return d(t,2)}))}n()}},{key:"replaceColor",value:function(t,e){var n=e.clotheColor,i=e.skinColors;switch(t){case this.colors.clothes[0]:return n;case this.colors.clothes[1]:return g(n,-80);case this.colors.skin[0]:return i;case this.colors.skin[1]:return g(i,-80);default:return t}}},{key:"createPeoples",value:function(t){var e=m(),n=e.ctx,i=e.canvas;i.webkitImageSmoothingEnabled=!1,i.mozImageSmoothingEnabled=!1,i.imageSmoothingEnabled=!1;var a=Math.ceil(Math.sqrt(t)),r=a;i.width=16*r,i.height=16*r;for(var o=0;o<r;o++)for(var A=0;A<a;A++)this.drawRandomPeople(n,16*o,16*A)}},{key:"drawPeople",value:function(t,e,n,i){for(var a=this,r=f(),o=g(this.colors.skin[0],c(64)-48),A=this.bases[c(7)].join("").match(/.{1,8}/g).map(function(t){return a.replaceColor.call(a,t,{clotheColor:r,skinColors:o})}),s=i,u=0;s<i+16;s++)for(var l=n;l<n+16;l++,u++)t.fillStyle="#"+A[u],t.fillRect(l,s,1,1)}},{key:"drawRandomPeople",value:function(t,e,n){this.drawPeople(t,c(7),e,n)}}]),t}(),K=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),D={skin:["dc9108","e8c7a1","be8e66","99633c","4c3732"],eyes:["277bc4","367865","9f5924"],hairs:{standard:["d24122","9b5324","141414","b4bac4"],rogue:["1c6f0b","2093bf","ca0c2a","3f1695"]}},Q=0,O=function(){function t(e){F(this,t),this.id=e||"jan_"+Q++,this.init()}return K(t,[{key:"init",value:function(){this.config=this.shuffle()}},{key:"create",value:function(){var t=this,e=m(),n=e.canvas,i=e.ctx,a=(e.remove,A("base")),r=a.width,o=a.height;n.width=r,n.height=o;var c=["base","eyes","pants","shirt","vest","bib","hair01","hair10","hair02"];return new Promise(function(e){c.forEach(function(e){if(t.config[e]){var n=A(e);E(i,n,t.config[e])}});var a=s("img");u(document.body,a).id=t.id,a.src=n.toDataURL("image/png"),e(t.id)})}},{key:"shuffle",value:function(){var t={base:D.skin[c(D.skin.length-1)],eyes:D.eyes[c(D.eyes.length-1)],pants:h(64,128),shirt:y(80)?h(64,192):null,vest:y(10)?h(32,64):null,bib:null,hair01:null,hair10:null,hair02:null};t.bib=t.shirt||t.shirt||!y(30)?null:h(64,192);var e=y(60)&&"standard"||y(30)&&"rogue"||null,n=e?D.hairs[e][c(D.hairs[e].length-1)]:null;return t.hair01="standard"==e?y(70)&&n||null:null,t.hair10="standard"==e&&t.hair01?y(50)&&n:null,t.hair02="rogue"==e?n:null,t}}]),t}(),N=s("div");N.className="assets",u(document.body,N).id="assets";var T=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),V=function t(e,n,i,a){R(this,t),this.x=e,this.y=n,this.w=i,this.h=a},P=function(){function t(e){R(this,t),this.context=e.context,this.image=e.image,this.frameId=0,this.frames=[],this.ticksPerFrame=e.ticksPerFrame,this.tickCount=0}return T(t,[{key:"addFrame",value:function(t,e,n,i){return this.frames.push(new V(t,e,n,i)),this}},{key:"render",value:function(t,e,n){this.context.save();var i=this.frames[this.frameId];n?(this.context.scale(-1,1),this.context.drawImage(this.image,i.x,i.y,i.w,i.h,-t-i.w,e,i.w,i.h)):this.context.drawImage(this.image,i.x,i.y,i.w,i.h,t,e,i.w,i.h),this.context.restore()}},{key:"update",value:function(t){t?(this.tickCount=0,this.frameId=0):(this.tickCount+=1,this.tickCount>this.ticksPerFrame&&(this.tickCount=0,this.frameId<this.frames.length-1?this.frameId+=1:this.frameId=0))}}]),t}(),Y={};Y.State={},Y.State.Up=0,Y.State.Pressed=1,Y.State.Down=2,Y.Key={},Y.Key.Up=87,Y.Key.Left=65,Y.Key.Down=83,Y.Key.Right=68,Y.Key.R=82,Y.Key.F=70,Y.Keys={},Y._keydown=function(t){var e=t.which;Y.Keys[e]||Y.Keys[e]===Y.State.Up||(Y.Keys[e]=Y.State.Up),Y.Keys[e]===Y.State.Pressed&&(Y.Keys[e]=Y.State.Down),Y.Keys[e]===Y.State.Up&&(Y.Keys[e]=Y.State.Pressed)},Y._keyup=function(t){var e=t.which;console.log(e),Y.Keys[e]=Y.State.Up},Y.init=function(){document.body.addEventListener("keydown",Y._keydown),document.body.addEventListener("keyup",Y._keyup)};var z=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),G=function(){function t(e,n){I(this,t),this.image=A(e),this.ctx=n,this.animations={},this.pos={x:0,y:0},this.initAnimations(),this.direction="right",Y.init()}return z(t,[{key:"initAnimations",value:function(){var t={context:this.ctx,image:this.image,ticksPerFrame:8},e=24,n=32;this.animations.right=new P(t).addFrame(48,n,e,n).addFrame(e,n,e,n).addFrame(0,n,e,n).addFrame(e,n,e,n),this.animations.left=new P(t).addFrame(48,96,e,n).addFrame(e,96,e,n).addFrame(0,96,e,n).addFrame(e,96,e,n),this.animations.down=new P(t).addFrame(48,64,e,n).addFrame(e,64,e,n).addFrame(0,64,e,n).addFrame(e,64,e,n),this.animations.up=new P(t).addFrame(48,0,e,n).addFrame(e,0,e,n).addFrame(0,0,e,n).addFrame(e,0,e,n)}},{key:"moveRight",value:function(){this.direction="right",this.pos.x+=1}},{key:"moveLeft",value:function(){this.direction="left",this.pos.x-=1}},{key:"moveDown",value:function(){this.direction="down",this.pos.y+=1}},{key:"moveUp",value:function(){this.direction="up",this.pos.y-=1}},{key:"render",value:function(){this.animations[this.direction].render(this.pos.x,this.pos.y)}},{key:"update",value:function(){Y.Keys[Y.Key.Right]>Y.State.Up&&this.moveRight(),Y.Keys[Y.Key.Left]>Y.State.Up&&this.moveLeft(),Y.Keys[Y.Key.Up]>Y.State.Up&&this.moveUp(),Y.Keys[Y.Key.Down]>Y.State.Up&&this.moveDown();var t=0;Object.keys(Y.Keys).forEach(function(e){return t+=Y.Keys[e]}),this.animations[this.direction].update(!t)}}]),t}(),J=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),j=function(){function t(){M(this,t),this.canvases={entities:{canvas:null,ctx:null},ui:{canvas:null,ctx:null}},this.init()}return J(t,[{key:"init",value:function(){var t=this;this.initCanvases(),B().then(function(){t.initPlayer(),t.loop()})}},{key:"tests",value:function(){k(),U()}},{key:"initPlayer",value:function(){var t=this;(new O).create().then(function(e){t.player=new G(e,t.ctx),console.log(t.player)})}},{key:"initCanvases",value:function(){var t=this;this.container=A("game"),this.canvas=s("canvas"),this.ctx=this.canvas.getContext("2d"),u(this.container,this.canvas);var e=function(){t.canvas.width=500,t.canvas.height=500,t.canvas.webkitImageSmoothingEnabled=!1,t.canvas.mozImageSmoothingEnabled=!1,t.canvas.imageSmoothingEnabled=!1};e(),window.addEventListener("resize",e)}},{key:"loop",value:function(){var t=this;window.requestAnimFrame(function(){return t.loop()});var e=Date.now();this.lsts||(this.lsts=e);this.lsts,this.lsts;this.lsts=e,this.ctx.clearRect(0,0,500,500);try{this.update(),this.render()}catch(t){console.log(t,"warning")}}},{key:"update",value:function(){this.player.update()}},{key:"render",value:function(){this.player.render()}}]),t}();window.addEventListener("load",function(){new j}),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var X=n(1);n.n(X)},function(t,e){}]);</script></body>
</html>